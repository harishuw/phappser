<?php/********************************************class.controller.php***************Created by HUW*********************Created on 27-04-2014**************Modified on **************************************************************************************/class controller {	public $page;	public $uri;	public $dbconfig;	public $model;	public $config;	public $baseurl;	public $debug=false;	public $cache=false;        public $error;	function __construct()	{		global $config;                global $error;                $this->error=$error;		$this->functions('uri');		$this->functions('config');                $uri=uri(0,TRUE);		$this->uri=$uri['full'];		$this->config=$config->config;                $this->dbconfig=$config->dbconfig;		$this->baseurl="http://".$_SERVER['HTTP_HOST'].preg_replace('@/+$@','',dirname($_SERVER['SCRIPT_NAME'])).'/';	}		function model($model)	{			include_once('core/db/class.mysqlfunctions.php');		include_once('core/class.model.php');		include_once('app/model/'.$model.'.php');		return new $model($this->dbconfig);	}	function view($view,$data='',$output=false)	{		if($data!="")			extract($data);		if($output)		{			ob_start();			include_once('app/view/'.$view.'.php');			$template = ob_get_contents();			ob_end_clean();			return $template;		}else		{			include_once('app/view/'.$view.'.php');		}	}	function dbconfig($dbconfig)	{            $this->dbconfig=$dbconfig;	}	function helper($helper)	{		if(file_exists('core/helpers/'.$helper.'.php'))                {                    include_once('core/helpers/'.$helper.'.php');                }else if(file_exists('helpers/'.$helper.'.php'))                {                    include_once('helpers/'.$helper.'.php');                }				}	function functions($func)	{            if(file_exists('core/functions/'.$func.'.php'))            {                include_once('core/functions/'.$func.'.php');            }else if(file_exists('functions/'.$func.'.php'))            {                include_once('functions/'.$func.'.php');            }                   	}	function library($library)	{            $class="";            if(file_exists('core/libraries/'.$library.'.php'))            {                include_once('core/libraries/'.$library.'.php');                $class=$library;            }else if(file_exists('libraries/'.$library.'.php'))            {                include_once('libraries/'.$library.'.php');                 $class=$library;            }            if($class!="")            {                return new $class;            }            return "";		           	}		function cache($html)	{		$filename=md5(time());		$cachefile = "cache/".$filename.".html";		if($cache&&file_exists($cachefile)):			include($cachefile); 		else:			ob_start();			echo$html;			$fp = fopen($cachefile, 'w'); 		fwrite($fp, ob_get_contents());		fclose($fp); 		ob_end_flush();			endif;	}	}